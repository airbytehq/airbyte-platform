micronaut:
  netty:
    event-loops:
      other:
        num-threads: 1
        prefer-native-transport: true
  http:
    client:
      event-loop-group: other
  server:
    port: -1 # Random port for tests

airbyte:
  auth:
    identity-provider:
      issuers:
        - http://test-url.com
        - airbyte
    token-issuer: "http://test-url.com"
  flyway:
    configs:
      initialization-timeout-ms: 60000
      minimum-migration-version: "0.40.23.002"
    jobs:
      initialization-timeout-ms: 60000
      minimum-migration-version: "0.40.23.002"
  workspace-root: /tmp
  cloud:
    storage:
      type: local
      bucket:
        log: log
        state: state
        workload-output: workload
        activity-payload: payload
        audit-logging: audit-logging
  connector-registry:
    enterprise:
      enterprise-stubs-url: "http://test-url.com"
  api:
    host: https://api.airbyte.com
  connector-builder-server-api:
    base-path: "http://test-url.com"
    token: TEST_TOKEN
  manifest-server-api:
    base-path: "http://test-url.com"
  shutdown:
    delayMs: 1
  web-app:
    url: "http://test-url.com"
  worker:
    job:
      error-reporting:
        sentry:
          dsn: test-dsn

datasources:
  config:
    url: jdbc:h2:mem:default
    driverClassName: org.h2.Driver
    username: sa
    password: ""
  jobs:
    url: jdbc:h2:mem:default
    driverClassName: org.h2.Driver
    username: sa
    password: ""
  local-secrets:
    url: jdbc:h2:mem:default
    driverClassName: org.h2.Driver
    username: sa
    password: ""

flyway:
  enabled: true
  datasources:
    config:
      enabled: false
      locations:
        - "classpath:io/airbyte/db/instance/configs/migrations"
    jobs:
      enabled: false
      locations:
        - "classpath:io/airbyte/db/instance/jobs/migrations"

jooq:
  datasources:
    config:
      jackson-converter-enabled: true
      sql-dialect: POSTGRES
    jobs:
      jackson-converter-enabled: true
      sql-dialect: POSTGRES
    local-secrets:
      jackson-converter-enabled: true
      sql-dialect: H2

endpoints:
  all:
    port: -1 # Random port for tests

logger:
  levels:
    io.micronaut.context.condition: DEBUG
